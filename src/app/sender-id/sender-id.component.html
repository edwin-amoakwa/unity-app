<h1 class="page-title">Sender IDs</h1>

<div class="row">
  <!-- Create Sender ID Form -->
  <div class="col-sm-12 mb-4">
    <app-card cardTitle="Create Sender ID">
      <form [formGroup]="senderIdForm" (ngSubmit)="onSubmit()">
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="application" class="form-label">Application</label>
          </div>
          <div class="col-md-9">
            <p-dropdown
              id="application"
              formControlName="applicationId"
              [options]="applications"
              optionLabel="appName"
              optionValue="id"
              styleClass="w-full">
            </p-dropdown>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="senderId" class="form-label">Sender ID</label>
          </div>
          <div class="col-md-9">
            <input
              type="text"
              class="form-control"
              id="senderId"
              formControlName="senderId"
              maxlength="11">
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="authLetter" class="form-label">Authorization Letter<span style="font-size:12px"><i>(pdf)</i></span></label>
          </div>
          <div class="col-md-9">
            <input #authLetterInput (change)="onFileChange_authLetter($event)" accept="application/pdf" class="form-control" type="file" id="authLetter">
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="bizDoc" class="form-label">Business Registration Document / Ghana Card<span style="font-size:12px"><i>(pdf)</i></span></label>
          </div>
          <div class="col-md-9">
            <input #bizDocInput (change)="onFileChange_bizDoc($event)" accept="application/pdf" class="form-control" type="file" id="bizDoc">
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">
            <label for="documentComments" class="form-label">Attached Documents Content</label>
          </div>
          <div class="col-md-9">
            <textarea
              class="form-control"
              id="documentComments"
              formControlName="documentComments">
            </textarea>
          </div>
        </div>
        <div class="row">
          <div class="col-md-9 offset-md-3">
            <button type="submit" class="btn btn-primary" [disabled]="!senderIdForm.valid">
              <span *ngIf="senderIdForm?.value?.id === null || senderIdForm?.value?.id === undefined">Create</span>
              <span *ngIf="senderIdForm?.value?.id !== null && senderIdForm?.value?.id !== undefined">Edit</span>
              Sender ID
            </button>
          </div>
        </div>
      </form>
    </app-card>
  </div>

  <!-- Sender IDs List Table -->
  <div class="col-sm-12">
    <app-card cardTitle="Sender IDs List">
      <p-table [value]="senderIds" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
               currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
               [tableStyle]="{'min-width': '50rem'}" styleClass="p-datatable-gridlines">
        <ng-template pTemplate="header">
          <tr>
            <th>App</th>
            <th>Sender ID</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-sender>
          <tr>
            <td>{{ sender.appName }}</td>
            <td>{{ sender.senderId }}</td>
            <td>
              <p-tag
                [value]="sender.idStatusName"
                [severity]="sender.idStatus === 'ACTIVE' ? 'success' : sender.idStatus === 'PENDING' ? 'warning' : 'secondary'">
              </p-tag>
            </td>
            <td>
              <p-button icon="pi pi-pencil" severity="info" pTooltip="Edit" (click)="editSenderId(sender)"/>
              <p-button icon="pi pi-trash" severity="danger" class="mx-1" pTooltip="Delete" (click)="deleteSenderId(sender)"/>
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="5" class="text-center text-muted py-3">
              No sender IDs found. Create one using the form above.
            </td>
          </tr>
        </ng-template>
      </p-table>
    </app-card>
  </div>
</div>
